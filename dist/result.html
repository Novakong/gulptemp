<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="utf-8" />
	<title>2016款吉利新帝豪</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, target-densitydpi=device-dpi">
	<meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta content="telephone=no" name="format-detection" />
    <link rel="stylesheet" href="css/style.css">
<script type="text/javascript">
var _smq = _smq || [];

_smq.push(['_setAccount', '619ab4d', new Date()]);
_smq.push(['pageview']);

(function() {
var sm = document.createElement('script'); sm.type = 'text/javascript'; sm.async = true;
sm.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'site.cdnmaster.com/sitemaster/collect.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(sm, s);
})();
</script>
    <script type='text/javascript' src='http://static.diditaxi.com.cn/webapp/ddbridge.js'></script>
    <script src="dep/jquery-2.1.1.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="dep/jquery.transit.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="dep/kpreload.js" type="text/javascript" charset="utf-8"></script>
	<script src="dep/WeixinApi.js" type="text/javascript" charset="utf-8"></script>
</head>
<body class="result">
	<div class="loading" id="loading">
		<!-- <div class="loadtext">
			<div id="loadpercent">89</div>
			<div class="loadbar"></div>
		</div> -->
	</div>
	<div id="wrapper">
		<div class="aw">
			<img src="img/circle.png" alt="" class="circle">
			<img src="img/1.png" alt="" class="resultinfo">
		</div>
		<div class="title">
			<img src="img/titlebg.png" alt="" class="titlebg">
			<img src="img/title.png" alt="" class="titletxt">
		</div>
		<div class="resultbtnbox">
			<a class="resultbtn1 hide"></a>
			<a class="resultbtn2 hide"></a>
		</div>
	</div>
	<a class="logo"><img src="img/logo.png" alt=""></a>
	<div class="sharemask hide"></div>
	<div id="info"></div>
<script>
var adjustObj = {fontSize: 40, height: 1100, width: 750}, adjustclock;
var util = {
	hash: function(item){
		if(!item){
			var Obj = {}, result;
			var t = location.hash;
			var r = new RegExp("[\#\&]([^=]*)=([^&])","ig")
			while(result = r.exec(t)){
				Obj[result[1]] = result[2];
			}
			return Obj;
		}
		if(typeof item == 'object'){
			var txt = '', o;
			for(o in item){
				txt += o + '=' + item[o] + '&';
			}
			txt = txt.slice(0,-1);
			location.hash = txt;
		}
		else{
			var svalue = location.hash.match(new RegExp("[\#\&]" + item + "=([^\&]*)(\&?)","i"));
    		return svalue ? svalue[1] :"";
		}
		
	},
	search: function(item) {
		if(!item){
			var Obj = {},result;
			var t = location.search;
			var r = new RegExp("[\?\&]([^=]*)=([^&])","ig")
			while(result = r.exec(t)){
				Obj[result[1]] = result[2];
			}
			return Obj;
		}
		if(typeof item == 'object'){
			var txt = '', o;
			for(o in item){
				txt += o + '=' + item[o] + '&';
			}
			txt = txt.slice(0,-1);
			location.search = txt;
		}
		else{
		    var svalue = location.search.match(new RegExp("[\?\&]" + item + "=([^\&]*)(\&?)","i"));
		    return svalue ? svalue[1] :"";
		}
	},
	ObjToHash: function(Obj){
		if(typeof Obj == 'object'){
			var txt = '', o;
			for(o in Obj){
				txt += o + '=' + Obj[o] + '&';
			}
			txt = txt.slice(0,-1);
			return txt;
		}else{
			return false;
		}
	},
	HashToObj: function(str){
		var Obj = {},result;
		var t = '&' + str;
		var r = new RegExp("[\&]([^=]*)=([^&])","ig");
		while(result = r.exec(t)){
			Obj[result[1]] = result[2];
		}
		return Obj;
	},
	ObjToUrl: function(Obj){
		var hash,search,url,arr,o;
		arr = Obj.url.split('#');
		if(arr[1])hash = arr[1];
		arr = arr[0].split('?');
		if(arr[1])search = arr[1];
		url = arr[0];
		if(search || Obj.search){
			search = util.HashToObj(search);
			for(o in Obj.search){
				search[o] = Obj.search[o];
			}
			url += '?' + util.ObjToHash(search);
		}
		if(hash || Obj.hash){
			hash = util.HashToObj(hash);
			for(o in Obj.hash){
				hash[o] = Obj.hash[o];
			}
			url += '#' + util.ObjToHash(hash);
		}		 
		return url;
	}
}
var size = {
	title: 13, result: 16, resultbtn1: 7.35, resultbtn2: 8.85
}
function adjust(){
	clearTimeout(adjustclock);
	adjustObj.height = $(window).height();
	adjustObj.width = $(window).width();
	adjustObj.fontSize = adjustObj.width / 16;
	document.documentElement.style.fontSize = adjustObj.fontSize + 'px';
	adjustclock = setTimeout(function(){
		var fs = parseInt($('html').css('fontSize'));
		if(fs !== adjustObj.fontSize){
			document.documentElement.style.fontSize = adjustObj.fontSize * adjustObj.fontSize / fs + 'px';
		}
	},300);
	var h = adjustObj.height * 640 / adjustObj.width;
	var rate = ( -h + 833 + 207 ) / 207;
	adjustObj.rate = rate;
	if(rate < 0)rate = 0;
	if(rate > 1)rate = 1;
	$('.title').css({scale: 1 - 0.3 * rate});
	$('.resultbtnbox').css({scale: 1 - 0.1 * rate});
	$('.aw').css({scale: 1 - 0.1 * rate});

}
function log(txt){
	if(txt)$('#info').html(txt);
	else{return $('#info').html();}
}
(function($, _) {
  'use strict';
	var isTouch = "ontouchend" in document.createElement("div");
  var ev = {
    start: isTouch ? 'touchstart' : 'mousedown',
    end: isTouch ? 'touchend' : 'mouseup',
    move: isTouch ? 'touchmove' : 'mousemove',
    cancel: isTouch ? 'touchcancel' : 'mousecancel'
  };
  $.event.special[_] = {
    setup: function() {
      $(this).off('click').on(ev.start + ' ' + ev.end, function(e) {
        ev.E = e.originalEvent.changedTouches ? e.originalEvent.changedTouches[0] : e;
      }).on(ev.start, function(e) {
        if (e.which && e.which !== 1) {
          return;
        }
        ev.target = e.target;
        ev.time = new Date().getTime();
        ev.X = ev.E.pageX;
        ev.Y = ev.E.pageY;
      }).on(ev.end, function(e) {
        if (
          ev.target === e.target &&
          ((new Date().getTime() - ev.time) < 750) &&
          (ev.X === ev.E.pageX && ev.Y === ev.E.pageY)
        ) {

          e.type = _;
          e.pageX = ev.E.pageX;
          e.pageY = ev.E.pageY;

          $.event.dispatch.call(this, e);
        }
      });
    },
    remove: function() {
      $(this).off(ev.start + ' ' + ev.end);
    }
  };
  $.fn[_] = function(fn) {
    return this[fn ? 'on' : 'trigger'](_, fn);
  };
})(jQuery, 'tap');
var kl = kpreload({
	list:[
		{src:'img/circle.png'},
		{src:'img/needbtn.png'},
		{src:'img/openbtn.png'},
		{src:'img/title.png'},
		{src:'img/titlebg.png'}
	],
	success:function(){
	  $('#loading').addClass('hide');
	  $('.title').css({scale: 0}).delay(800).transit({scale: 1 - 0.3 * adjustObj.rate}, 1000, function(){
	  	 $('.title').css({transformOrigin: 'center top',scale: 1 - 0.3 * adjustObj.rate});
	  });
	  $('.resultbtnbox').css({scale: 0}).delay(800).transit({scale: 1 - 0.1 * adjustObj.rate}, 1000, function(){
	  	 $('.resultbtnbox').css({scale: 1 - 0.1 * adjustObj.rate});
	  });
	  $('body').addClass('active');
	},
	progressmethod:function(n){
		// $('#loadpercent').html(n);
		// log('loading'+n+'%');
	}
});
var shareinfo = {
	3: {title: '“天下只有本宫最漂亮！”\n吉利新帝豪送您滴滴打车券'},
	5: {title: '“钱都花不完怎么办？”\n吉利新帝豪送您滴滴打车券'},
	1: {title: '“传说中的学霸就是我\n”吉利新帝豪送您滴滴打车券'},
	7: {title: '“憋说话，你们都来吻我！”\n吉利新帝豪送您滴滴打车券'},
	4: {title: '“升职加薪，棒棒哒！”\n吉利新帝豪送您滴滴打车券'},
	2: {title: '“气色有活力，身体杠杠滴！”\n吉利新帝豪送您滴滴打车券'},
	0: {title: '“胡吃海喝不怕胖！”\n吉利新帝豪送您滴滴打车券'},
	6: {title: '“世界那么大，我要玩个爽！”\n吉利新帝豪送您滴滴打车券'}
}
$(function(){
	$(window).on('resize', adjust);
	adjust();
	var gs = util.search();
	if(!gs.atype)gs.atype = "0";
	gs.btype = gs.atype;
	if(gs.share == "1"){
		gs.btype = 'y'+gs.atype;
		$('.resultbtn2').removeClass('hide');
	}else{
		$('.resultbtn1').removeClass('hide');
		var osearch = util.search();
		osearch.share = 1;
		osearch.atype = gs.atype;
		share.content.link = util.ObjToUrl({
			url: location.href,
			search: osearch
		});
		share.callback = function(){
			window.location.href = 'http://dwz.cn/2B1l02';
		}
	}
	$('.resultinfo').attr('src', 'img/' + gs.btype + '.png');
	share.content.title = shareinfo[gs.atype].title;
	share.content.desc = '与90万吉利新帝豪车主一起新年新向上';
	if(wx && wx.wxSigned)share.wxShare();
	var shareData = {
        share_url: share.content.link, // 分享出去后用户点开所指向的链接地址，比如填写http://www.baidu.com 那分享出去别的用户点击进来会显示百度的页面，一定要加http://或https://前缀
        share_icon_url: 'http://promotion.geely.com/ddchuxing/img/sharelt.jpg', // 分享的出去后所显示的图标的链接   ，如下图所示的2

        share_img_url: 'http://promotion.geely.com/ddchuxing/img/share1.jpg', //分享的大图  （不必理会）    
        share_title: shareinfo[gs.atype].title, // 分享出去时所显示的标题             如下图所示的1
        share_content: '与90万吉利新帝豪车主一起新年新向上', // 分享出去时所显示的描述           如下图所示的3   （分享到朋友圈时描述是不会显示的）
        share_from: '滴滴打车' // 分享来源，非必填,默认为滴滴打车
    };
    $('.resultbtn1').on('touchstart',function(){
    	$(".sharemask").addClass("on");
    	console.log(1)
    	_smq.push(['custom','结果页','戳开红包'+(parseInt(gs.atype)+1)]);
    	setTimeout(function(){
    		$(".sharemask").removeClass("on");
    		location.href = "http://dwz.cn/2B1l02";

    	},8000);
    });
    $('.resultbtn2').on('touchstart',function(){
    	_smq.push(['custom','查看好友','我也要抢']);
    	location.href = "http://promotion.geely.com/ddchuxing/";
    });
    $('.sharemask').on('touchstart',function(){
    	$('.sharemask').addClass('hide');
    });
    if(window.didi) {
        didi.initShare(shareData, function() {
            window.location.href = 'http://dwz.cn/2B1l02';
        });
    }
	kl.push({src:'img/'+gs.btype+'.png'});
	kl.start();
})
</script>
</body>
</html>